{"ast":null,"code":"import React from'react';import{useEffect}from'react';import{useContext}from'react';import Header from\"../Header/Header\";import CurrentUserContext from'../../contexts/CurrentUserContext';import useFormWithValidation from'../../hook/useFormWithValidation';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Profile(_ref){var handleSignOut=_ref.handleSignOut,handleProfile=_ref.handleProfile,loggedIn=_ref.loggedIn;var _useFormWithValidatio=useFormWithValidation(),values=_useFormWithValidatio.values,handleChange=_useFormWithValidatio.handleChange,resetForm=_useFormWithValidatio.resetForm,isValid=_useFormWithValidatio.isValid;var currentUser=useContext(CurrentUserContext);function handleSubmit(e){e.preventDefault();handleProfile(values);console.log(values);}useEffect(function(){if(currentUser){resetForm(currentUser,{},true);}},[currentUser,resetForm]);var requirementValidity=!isValid||currentUser.name===values.name&&currentUser.email===values.email;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Header,{loggedIn:loggedIn}),/*#__PURE__*/_jsxs(\"section\",{className:\"profile\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"profile__title\",children:\"\\u041F\\u0440\\u0438\\u0432\\u0435\\u0442, \".concat(currentUser.name||'',\"!\")}),/*#__PURE__*/_jsxs(\"form\",{className:\"profile__form\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"label\",{className:\"profile__label\",children:[\"\\u0418\\u043C\\u044F\",/*#__PURE__*/_jsx(\"input\",{name:\"name\",className:\"profile__input\",onChange:handleChange,defaultValue:values.name||'',type:\"text\",required:true,minLength:\"2\",maxLength:\"30\",pattern:\"^[A-Za-z\\u0410-\\u042F\\u0430-\\u044F\\u0401\\u0451 /s -]+$\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"profile__border\"}),/*#__PURE__*/_jsxs(\"label\",{className:\"profile__label\",children:[\"E-mail\",/*#__PURE__*/_jsx(\"input\",{name:\"email\",className:\"profile__input\",onChange:handleChange,defaultValue:values.email||'',type:\"email\",required:true})]}),requirementValidity?/*#__PURE__*/_jsx(\"p\",{className:\"profile__button-save profile__button-save_disable\",children:\"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\"}):/*#__PURE__*/_jsx(\"button\",{className:\"profile__button-save\",type:\"submit\",children:\"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"profile__logout\",onClick:handleSignOut,children:\"\\u0412\\u044B\\u0439\\u0442\\u0438 \\u0438\\u0437 \\u0430\\u043A\\u043A\\u0430\\u0443\\u043D\\u0442\\u0430\"})]})]});}export default Profile;","map":{"version":3,"names":["React","useEffect","useContext","Header","CurrentUserContext","useFormWithValidation","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Profile","_ref","handleSignOut","handleProfile","loggedIn","_useFormWithValidatio","values","handleChange","resetForm","isValid","currentUser","handleSubmit","e","preventDefault","console","log","requirementValidity","name","email","children","className","concat","onSubmit","onChange","defaultValue","type","required","minLength","maxLength","pattern","onClick"],"sources":["C:/Users/Леха/Documents/dev/first-project/movies-explorer-frontend/src/components/Profile/Profile.jsx"],"sourcesContent":["import React from 'react';\nimport { useEffect} from 'react';\nimport {useContext} from 'react';\nimport Header from \"../Header/Header\";\nimport CurrentUserContext from '../../contexts/CurrentUserContext';\nimport useFormWithValidation from '../../hook/useFormWithValidation';\n\nfunction Profile({ handleSignOut, handleProfile, loggedIn }){\n\n  const { values, handleChange, resetForm, isValid } = useFormWithValidation();\n  const currentUser = useContext(CurrentUserContext);\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    handleProfile(values);\n    console.log(values);\n  }\n\n  useEffect(() => {\n    if (currentUser) {\n      resetForm(currentUser, {}, true);\n    }\n  }, [currentUser, resetForm]);\n\n  const requirementValidity = (!isValid || (currentUser.name === values.name && currentUser.email === values.email));\n\n\n\n    return(\n        <>\n            <Header loggedIn={loggedIn} />\n            <section className=\"profile\">\n                <h3 className=\"profile__title\">{`Привет, ${currentUser.name || ''}!`}</h3>\n                <form className=\"profile__form\" onSubmit={handleSubmit}>\n                    <label className=\"profile__label\">\n                    Имя\n                        <input\n                        name='name'\n                        className=\"profile__input\"\n                        onChange={handleChange}\n                        defaultValue={values.name || ''}\n                        type='text'\n                        required\n                        minLength=\"2\"\n                        maxLength=\"30\"\n                        pattern=\"^[A-Za-zА-Яа-яЁё /s -]+$\"\n                        \n                        />\n                    </label>\n                    <div className=\"profile__border\"></div>\n                    <label className=\"profile__label\">\n                    E-mail\n                        <input\n                        name='email'\n                        className=\"profile__input\"\n                        onChange={handleChange}\n                        defaultValue={values.email || ''}\n                        type=\"email\"\n                        required\n                        />\n                    </label>\n                    {requirementValidity ? \n                    (<p className=\"profile__button-save profile__button-save_disable\" >Редактировать</p>) \n                    : \n                    (<button  className=\"profile__button-save\" type=\"submit\">Редактировать</button>)\n                  }\n                </form>\n                <button type=\"submit\" className=\"profile__logout\" onClick={handleSignOut}>\n                        Выйти из аккаунта\n                    </button>\n            </section>\n        </>\n    );\n}\n\nexport default Profile"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}