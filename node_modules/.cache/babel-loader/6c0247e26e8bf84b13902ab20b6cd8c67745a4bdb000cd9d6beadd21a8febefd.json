{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\\\u041B\\u0435\\u0445\\u0430\\\\Documents\\\\dev\\\\first-project\\\\movies-explorer-frontend\\\\src\\\\components\\\\Profile\\\\Profile.jsx\",\n  _s = $RefreshSig$();\nimport React from 'react';\nimport { useEffect } from 'react';\nimport { useContext } from 'react';\nimport Header from \"../Header/Header\";\nimport CurrentUserContext from '../../contexts/CurrentUserContext';\nimport useFormWithValidation from '../../hook/useFormWithValidation';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction Profile(_ref) {\n  _s();\n  let {\n    handleSignOut,\n    handleProfile,\n    loggedIn\n  } = _ref;\n  const {\n    values,\n    handleChange,\n    resetForm,\n    errors,\n    isValid\n  } = useFormWithValidation();\n  const currentUser = useContext(CurrentUserContext);\n  const [isUserInfoChange, setIsUserInfoChange] = useState(false);\n  useEffect(() => {\n    if (name !== currentUser.name || email !== currentUser.email) {\n      setIsUserInfoChange(true);\n    } else {\n      setIsUserInfoChange(false);\n    }\n  }, [name, email, currentUser]);\n  function handleSubmit(e) {\n    e.preventDefault();\n    handleProfile(values);\n    console.log(values);\n  }\n  useEffect(() => {\n    if (currentUser) {\n      resetForm(currentUser, {}, true);\n    }\n  }, [currentUser, resetForm]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Header, {\n      loggedIn: loggedIn\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"profile\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"profile__title\",\n        children: `Привет, ${currentUser.name || ''}!`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"profile__form\",\n        onSubmit: handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"profile__label\",\n          children: [\"\\u0418\\u043C\\u044F\", /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"name\",\n            className: \"profile__input\",\n            onChange: handleChange,\n            defaultValue: values.name || '',\n            type: \"text\",\n            required: true,\n            minLength: \"2\",\n            maxLength: \"30\",\n            pattern: \"^[A-Za-z\\u0410-\\u042F\\u0430-\\u044F\\u0401\\u0451 /s -]+$\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 44,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"profile__erorr\",\n          children: errors.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"profile__label\",\n          children: [\"E-mail\", /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"email\",\n            className: \"profile__input\",\n            onChange: handleChange,\n            defaultValue: values.email || '',\n            type: \"email\",\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"profile__erorr\",\n          children: errors.email\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"profile__button-save\",\n          type: \"submit\",\n          disabled: !isValid || !isUserInfoChange,\n          children: \"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"profile__logout\",\n        onClick: handleSignOut,\n        children: \"\\u0412\\u044B\\u0439\\u0442\\u0438 \\u0438\\u0437 \\u0430\\u043A\\u043A\\u0430\\u0443\\u043D\\u0442\\u0430\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n}\n_s(Profile, \"V++r5NQR6U/vnsZvJJy/9PB8Eag=\", false, function () {\n  return [useFormWithValidation];\n});\n_c = Profile;\nexport default Profile;\nvar _c;\n$RefreshReg$(_c, \"Profile\");","map":{"version":3,"names":["React","useEffect","useContext","Header","CurrentUserContext","useFormWithValidation","jsxDEV","_jsxDEV","Fragment","_Fragment","Profile","_ref","_s","handleSignOut","handleProfile","loggedIn","values","handleChange","resetForm","errors","isValid","currentUser","isUserInfoChange","setIsUserInfoChange","useState","name","email","handleSubmit","e","preventDefault","console","log","children","fileName","_jsxFileName","lineNumber","columnNumber","className","onSubmit","onChange","defaultValue","type","required","minLength","maxLength","pattern","disabled","onClick","_c","$RefreshReg$"],"sources":["C:/Users/Леха/Documents/dev/first-project/movies-explorer-frontend/src/components/Profile/Profile.jsx"],"sourcesContent":["import React from 'react';\nimport { useEffect, } from 'react';\nimport {useContext} from 'react';\nimport Header from \"../Header/Header\";\nimport CurrentUserContext from '../../contexts/CurrentUserContext';\nimport useFormWithValidation from '../../hook/useFormWithValidation';\n\nfunction Profile({ handleSignOut, handleProfile, loggedIn }){\n\n  const { values, handleChange, resetForm, errors, isValid } = useFormWithValidation();\n  const currentUser = useContext(CurrentUserContext);\n  const [isUserInfoChange, setIsUserInfoChange ] = useState(false);\n  useEffect(() => { \n    if ((name !== currentUser.name) || (email !== currentUser.email)) {\n      setIsUserInfoChange(true)\n     } else {\n      setIsUserInfoChange(false)\n    }\n  }, [name, email, currentUser],);\n  \n  \n  \n  \n  function handleSubmit(e) {\n    e.preventDefault();\n    handleProfile(values);\n    console.log(values);\n  }\n\n  useEffect(() => {\n    if (currentUser) {\n      resetForm(currentUser, {}, true);\n    }\n  }, [currentUser, resetForm]);\n\n return(\n        <>\n            <Header loggedIn={loggedIn} />\n            <section className=\"profile\">\n                <h3 className=\"profile__title\">{`Привет, ${currentUser.name || ''}!`}</h3>\n                <form className=\"profile__form\" onSubmit={handleSubmit}>\n                    <label className=\"profile__label\">\n                    Имя\n                        <input\n                        name='name'\n                        className=\"profile__input\"\n                        onChange={handleChange}\n                        defaultValue={values.name || ''}\n                        type='text'\n                        required\n                        minLength=\"2\"\n                        maxLength=\"30\"\n                        pattern=\"^[A-Za-zА-Яа-яЁё /s -]+$\"\n                        \n                        />\n                    </label>\n                    <span className=\"profile__erorr\">{errors.name}</span>\n                    <label className=\"profile__label\">\n                    E-mail\n                        <input\n                        name='email'\n                        className=\"profile__input\"\n                        onChange={handleChange}\n                        defaultValue={values.email || ''}\n                        type=\"email\"\n                        required\n                        />\n                        </label>\n                        <span className=\"profile__erorr\">{errors.email}</span> \n                        <button className='profile__button-save' type='submit' disabled={(!isValid  || !isUserInfoChange)} >Редактировать</button>\n                    \n                </form>\n                <button type=\"submit\" className=\"profile__logout\" onClick={handleSignOut}>\n                        Выйти из аккаунта\n                    </button>\n            </section>\n        </>\n    );\n    \n}\n\nexport default Profile"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}