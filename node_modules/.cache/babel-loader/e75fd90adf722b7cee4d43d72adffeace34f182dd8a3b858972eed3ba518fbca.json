{"ast":null,"code":"import _classCallCheck from\"C:/Users/\\u041B\\u0435\\u0445\\u0430/Documents/dev/first-project/movies-explorer-frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/\\u041B\\u0435\\u0445\\u0430/Documents/dev/first-project/movies-explorer-frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";var AuthApi=/*#__PURE__*/function(){function AuthApi(basePath){_classCallCheck(this,AuthApi);this._basePath=basePath;}_createClass(AuthApi,[{key:\"_getJson\",value:function _getJson(res){if(res.ok){return res.json();}return Promise.reject(\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430: \".concat(res.status));}},{key:\"registerUser\",value:function registerUser(name,email,password){var _this=this;return fetch(\"\".concat(this._basePath,\"/signup\"),{method:\"POST\",headers:{'Accept':'application/json',\"Content-Type\":\"application/json\"},body:JSON.stringify({name:name,email:email,password:password})}).then(function(res){return _this._getJson(res);});}},{key:\"loginUser\",value:function loginUser(email,password){var _this2=this;return fetch(\"\".concat(this._basePath,\"/signin\"),{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({email:email,password:password})}).then(function(res){return _this2._getJson(res);});}},{key:\"checkToken\",value:function checkToken(token){var _this3=this;return fetch(\"\".concat(this._basePath,\"/users/me\"),{method:\"GET\",headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \".concat(token)}}).then(function(res){return _this3._getJson(res);});}}]);return AuthApi;}();var authApi=new AuthApi(\"https://api.movies.neydy.nomoreparties.sbs\");export default authApi;","map":{"version":3,"names":["AuthApi","basePath","_classCallCheck","_basePath","_createClass","key","value","_getJson","res","ok","json","Promise","reject","concat","status","registerUser","name","email","password","_this","fetch","method","headers","body","JSON","stringify","then","loginUser","_this2","checkToken","token","_this3","Authorization","authApi"],"sources":["C:/Users/Леха/Documents/dev/first-project/movies-explorer-frontend/src/utils/AuthApi.js"],"sourcesContent":["class AuthApi {\n    constructor(basePath) {\n      this._basePath = basePath;\n    }\n\n    _getJson(res) {\n      if (res.ok) {\n        return res.json();\n      }\n      return Promise.reject(`Ошибка: ${res.status}`);\n    }\n \n    registerUser(name, email, password) {\n      return fetch(`${this._basePath}/signup`, {\n        method: \"POST\",\n        headers: {\n          'Accept': 'application/json',\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({name, email, password }),\n      }).then((res) => this._getJson(res));\n    }\n  \n  \n    loginUser(email, password) {\n      return fetch(`${this._basePath}/signin`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({ email, password }),\n      }).then((res) => this._getJson(res));\n    }\n  \n   \n    checkToken(token) {\n      return fetch(`${this._basePath}/users/me`, {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${token}`,\n        },\n      }).then((res) => this._getJson(res));\n    }\n    \n  }\n  const authApi = new AuthApi(\"https://api.movies.neydy.nomoreparties.sbs\");\n  export default authApi;"],"mappings":"yVAAM,CAAAA,OAAO,yBACT,SAAAA,QAAYC,QAAQ,CAAE,CAAAC,eAAA,MAAAF,OAAA,EACpB,IAAI,CAACG,SAAS,CAAGF,QAAQ,CAC3B,CAACG,YAAA,CAAAJ,OAAA,GAAAK,GAAA,YAAAC,KAAA,CAED,SAAAC,SAASC,GAAG,CAAE,CACZ,GAAIA,GAAG,CAACC,EAAE,CAAE,CACV,MAAO,CAAAD,GAAG,CAACE,IAAI,CAAC,CAAC,CACnB,CACA,MAAO,CAAAC,OAAO,CAACC,MAAM,0CAAAC,MAAA,CAAYL,GAAG,CAACM,MAAM,CAAE,CAAC,CAChD,CAAC,GAAAT,GAAA,gBAAAC,KAAA,CAED,SAAAS,aAAaC,IAAI,CAAEC,KAAK,CAAEC,QAAQ,CAAE,KAAAC,KAAA,MAClC,MAAO,CAAAC,KAAK,IAAAP,MAAA,CAAI,IAAI,CAACV,SAAS,YAAW,CACvCkB,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACP,QAAQ,CAAE,kBAAkB,CAC5B,cAAc,CAAE,kBAClB,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CAACT,IAAI,CAAJA,IAAI,CAAEC,KAAK,CAALA,KAAK,CAAEC,QAAQ,CAARA,QAAS,CAAC,CAC/C,CAAC,CAAC,CAACQ,IAAI,CAAC,SAAClB,GAAG,QAAK,CAAAW,KAAI,CAACZ,QAAQ,CAACC,GAAG,CAAC,GAAC,CACtC,CAAC,GAAAH,GAAA,aAAAC,KAAA,CAGD,SAAAqB,UAAUV,KAAK,CAAEC,QAAQ,CAAE,KAAAU,MAAA,MACzB,MAAO,CAAAR,KAAK,IAAAP,MAAA,CAAI,IAAI,CAACV,SAAS,YAAW,CACvCkB,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACP,cAAc,CAAE,kBAClB,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CAAER,KAAK,CAALA,KAAK,CAAEC,QAAQ,CAARA,QAAS,CAAC,CAC1C,CAAC,CAAC,CAACQ,IAAI,CAAC,SAAClB,GAAG,QAAK,CAAAoB,MAAI,CAACrB,QAAQ,CAACC,GAAG,CAAC,GAAC,CACtC,CAAC,GAAAH,GAAA,cAAAC,KAAA,CAGD,SAAAuB,WAAWC,KAAK,CAAE,KAAAC,MAAA,MAChB,MAAO,CAAAX,KAAK,IAAAP,MAAA,CAAI,IAAI,CAACV,SAAS,cAAa,CACzCkB,MAAM,CAAE,KAAK,CACbC,OAAO,CAAE,CACP,cAAc,CAAE,kBAAkB,CAClCU,aAAa,WAAAnB,MAAA,CAAYiB,KAAK,CAChC,CACF,CAAC,CAAC,CAACJ,IAAI,CAAC,SAAClB,GAAG,QAAK,CAAAuB,MAAI,CAACxB,QAAQ,CAACC,GAAG,CAAC,GAAC,CACtC,CAAC,WAAAR,OAAA,KAGH,GAAM,CAAAiC,OAAO,CAAG,GAAI,CAAAjC,OAAO,CAAC,4CAA4C,CAAC,CACzE,cAAe,CAAAiC,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}