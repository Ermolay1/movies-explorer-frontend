{"ast":null,"code":"import _classCallCheck from\"C:/Users/\\u041B\\u0435\\u0445\\u0430/Documents/dev/first-project/movies-explorer-frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/\\u041B\\u0435\\u0445\\u0430/Documents/dev/first-project/movies-explorer-frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";var MainApi=/*#__PURE__*/function(){function MainApi(basePath,token){_classCallCheck(this,MainApi);this._basePath=basePath;this._token=token;}_createClass(MainApi,[{key:\"_getHeaders\",value:function _getHeaders(){return{\"Content-type\":\"application/json\",authorization:this._token};}},{key:\"_getJson\",value:function _getJson(res){if(res.ok){return res.json();}return Promise.reject(\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430: \".concat(res.status));}},{key:\"getCurrentUser\",value:function getCurrentUser(){var token=localStorage.getItem(\"jwt\");return fetch(\"\".concat(this._basePath,\"/users/me \"),{headers:{\"Content-type\":\"application/json\",authorization:\"Bearer \".concat(token)}}).then(this._getJson);}},{key:\"updateUser\",value:function updateUser(name,email){var _this=this;return fetch(\"\".concat(this._basePath,\"/users/me\"),{method:'PATCH',headers:{authorization:\"Bearer \".concat(localStorage.getItem('jwt')),'Content-Type':'application/json'},body:JSON.stringify({name:name,email:email})}).then(function(res){return _this._getJson(res);});}},{key:\"addNewMovie\",value:function addNewMovie(data){var _this2=this;return fetch(\"\".concat(this._basePath,\"/movies\"),{method:'POST',headers:{authorization:\"Bearer \".concat(localStorage.getItem('jwt')),'Content-Type':'application/json'},body:JSON.stringify({country:data.country,director:data.director,duration:data.duration,year:data.year,description:data.description,image:data.image,trailerLink:data.trailerLink,thumbnail:data.thumbnail,movieId:data.id,nameRU:data.nameRU,nameEN:data.nameEN})}).then(function(res){return _this2._getJson(res);});}// удаление фильма из сохранённых\n},{key:\"deleteMovie\",value:function deleteMovie(data){var _this3=this;return fetch(\"\".concat(this._basePath,\"/movies/\").concat(data),{method:'DELETE',headers:{authorization:\"Bearer \".concat(localStorage.getItem('jwt'))}}).then(function(res){return _this3._getJson(res);});}},{key:\"getSavedMovies\",value:function getSavedMovies(){var _this4=this;return fetch(\"\".concat(this._basePath,\"/movies\"),{method:'GET',headers:{authorization:\"Bearer \".concat(localStorage.getItem('jwt'))}}).then(function(res){return _this4._getJson(res);});}}]);return MainApi;}();var mainApi=new MainApi('https://api.movies.neydy.nomoreparties.sbs');export default mainApi;","map":{"version":3,"names":["MainApi","basePath","token","_classCallCheck","_basePath","_token","_createClass","key","value","_getHeaders","authorization","_getJson","res","ok","json","Promise","reject","concat","status","getCurrentUser","localStorage","getItem","fetch","headers","then","updateUser","name","email","_this","method","body","JSON","stringify","addNewMovie","data","_this2","country","director","duration","year","description","image","trailerLink","thumbnail","movieId","id","nameRU","nameEN","deleteMovie","_this3","getSavedMovies","_this4","mainApi"],"sources":["C:/Users/Леха/Documents/dev/first-project/movies-explorer-frontend/src/utils/MainApi.js"],"sourcesContent":["class MainApi {\n  constructor(basePath, token) {\n    this._basePath = basePath;\n    this._token = token;\n  }\n  _getHeaders() {\n    return {\n      \"Content-type\": \"application/json\",\n      authorization: this._token,\n    };\n  }\n  _getJson(res) {\n    if (res.ok) {\n      return res.json();\n    }\n    return Promise.reject(`Ошибка: ${res.status}`);\n  }\n\n\n  getCurrentUser() {\n    const token = localStorage.getItem(\"jwt\");\n    return fetch(`${this._basePath}/users/me `, {\n      headers: {\n      \"Content-type\": \"application/json\",\n      authorization: `Bearer ${token}`,\n      }\n    }).then(this._getJson);\n  }\n\n  updateUser(name, email) {\n    return fetch(`${this._basePath}/users/me`, {\n      method: 'PATCH',\n      headers: {\n        authorization: `Bearer ${localStorage.getItem('jwt')}`,\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({ name, email }),\n    }).then(res => this._getJson(res));\n  }\n\n  addNewMovie(data) {\n    return fetch(`${this._basePath}/movies`, {\n      method: 'POST',\n      headers: {\n        authorization: `Bearer ${localStorage.getItem('jwt')}`,\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        country: data.country,\n        director: data.director,\n        duration: data.duration,\n        year: data.year,\n        description: data.description,\n        image: data.image,\n        trailerLink: data.trailerLink,\n        thumbnail: data.thumbnail,\n        movieId: data.id,\n        nameRU: data.nameRU,\n        nameEN: data.nameEN,\n      }),\n    }).then(res => this._getJson(res));\n  }\n\n  // удаление фильма из сохранённых\n  deleteMovie(data) {\n    return fetch(`${this._basePath}/movies/${data}`, {\n      method: 'DELETE',\n      headers: {\n        authorization: `Bearer ${localStorage.getItem('jwt')}`,\n      },\n    }).then(res => this._getJson(res));\n  }\n\n  getSavedMovies() {\n    return fetch(`${this._basePath}/movies`, {\n      method: 'GET',\n      headers: {\n        authorization: `Bearer ${localStorage.getItem('jwt')}`,\n      },\n    }).then(res => this._getJson(res));\n  }\n}\n\n\nconst mainApi = new MainApi('https://api.movies.neydy.nomoreparties.sbs');\n\n  export default mainApi;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}